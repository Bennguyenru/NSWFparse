!function n(a,s,i){function o(e,t){if(!s[e]){if(!a[e]){var r="function"==typeof require&&require;if(!t&&r)return r(e,!0);if(l)return l(e,!0);throw(t=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",t}r=s[e]={exports:{}},a[e][0].call(r.exports,function(t){return o(a[e][1][t]||t)},r,r.exports,n,a,s,i)}return s[e].exports}for(var l="function"==typeof require&&require,t=0;t<i.length;t++)o(i[t]);return o}({1:[function(t,e,r){"use strict";t=t("./core");class u extends Error{constructor(t,...e){super(...e),Error.captureStackTrace&&Error.captureStackTrace(this,u),this.name="StatusError",this.message=t.statusMessage,this.statusCode=t.status,this.res=t,this.json=t.json.bind(t),this.text=t.text.bind(t),this.arrayBuffer=t.arrayBuffer.bind(t);let r;var n,a;Object.defineProperty(this,"responseBody",{get:()=>r=r||this.arrayBuffer()}),this.headers={};for([n,a]of t.headers.entries())this.headers[n.toLowerCase()]=a}}e.exports=t((a,s,i,o,l)=>async(t,e,r={})=>{t=l+(t||"");let n=new URL(t);if(o=o||{},n.username&&(o.Authorization="Basic "+btoa(n.username+":"+n.password),n=new URL(n.protocol+"//"+n.host+n.pathname+n.search)),"https:"!==n.protocol&&"http:"!==n.protocol)throw new Error("Unknown protocol, "+n.protocol);if(e&&!(e instanceof ArrayBuffer||ArrayBuffer.isView(e)||"string"==typeof e)){if("object"!=typeof e)throw new Error("Unknown body type.");e=JSON.stringify(e),o["Content-Type"]="application/json"}r=new Headers({...o||{},...r});t=await fetch(n,{method:s,headers:r,body:e});if(t.statusCode=t.status,a.has(t.status))return"json"===i?t.json():"buffer"===i?t.arrayBuffer():"string"===i?t.text():t;throw new u(t)})},{"./core":2}],2:[function(t,e,r){"use strict";const o=new Set(["json","buffer","string"]);e.exports=e=>(...t)=>{const r=new Set;let n,a,s,i="";return t.forEach(t=>{if("string"==typeof t)if(t.toUpperCase()===t){var e;if(n)throw e=`Can't set method to ${t}, already set to ${n}.`,new Error(e);n=t}else if(t.startsWith("http:")||t.startsWith("https:"))i=t;else{if(!o.has(t))throw new Error("Unknown encoding, "+t);a=t}else if("number"==typeof t)r.add(t);else{if("object"!=typeof t)throw new Error("Unknown type: "+typeof t);if(Array.isArray(t)||t instanceof Set)t.forEach(t=>r.add(t));else{if(s)throw new Error("Cannot set headers twice.");s=t}}}),n=n||"GET",0===r.size&&r.add(200),e(r,n,a,s,i)}},{}],3:[function(t,e,r){"use strict";const n=t("./util").buildOptions,a={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataTagName:!1,cdataPositionChar:"\\c",format:!1,indentBy:"  ",supressEmptyNode:!1,tagValueProcessor:function(t){return t},attrValueProcessor:function(t){return t}},s=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","cdataTagName","cdataPositionChar","format","indentBy","supressEmptyNode","tagValueProcessor","attrValueProcessor","rootNodeName"];function i(t){this.options=n(t,a,s),this.options.ignoreAttributes||this.options.attrNodeName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=g),this.options.cdataTagName?this.isCDATA=m:this.isCDATA=function(){return!1},this.replaceCDATAstr=l,this.replaceCDATAarr=u,this.processTextOrObjNode=o,this.options.format?(this.indentate=p,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.supressEmptyNode?(this.buildTextNode=f,this.buildObjNode=d):(this.buildTextNode=h,this.buildObjNode=c),this.buildTextValNode=h,this.buildObjectNode=c}function o(t,e,r){var n=this.j2x(t,r+1);return void 0!==t[this.options.textNodeName]&&1===Object.keys(t).length?this.buildTextNode(n.val,e,n.attrStr,r):this.buildObjNode(n.val,e,n.attrStr,r)}function l(t,e){return t=this.options.tagValueProcessor(""+t),""===this.options.cdataPositionChar||""===t?t+"<![CDATA["+e+"]]"+this.tagEndChar:t.replace(this.options.cdataPositionChar,"<![CDATA["+e+"]]"+this.tagEndChar)}function u(t,e){if(t=this.options.tagValueProcessor(""+t),""===this.options.cdataPositionChar||""===t)return t+"<![CDATA["+e.join("]]><![CDATA[")+"]]"+this.tagEndChar;for(var r in e)t=t.replace(this.options.cdataPositionChar,"<![CDATA["+e[r]+"]]>");return t+this.newLine}function c(t,e,r,n){return r&&-1===t.indexOf("<")?this.indentate(n)+"<"+e+r+">"+t+"</"+e+this.tagEndChar:this.indentate(n)+"<"+e+r+this.tagEndChar+t+this.indentate(n)+"</"+e+this.tagEndChar}function d(t,e,r,n){return""!==t?this.buildObjectNode(t,e,r,n):this.indentate(n)+"<"+e+r+"/"+this.tagEndChar}function h(t,e,r,n){return this.indentate(n)+"<"+e+r+">"+this.options.tagValueProcessor(t)+"</"+e+this.tagEndChar}function f(t,e,r,n){return""!==t?this.buildTextValNode(t,e,r,n):this.indentate(n)+"<"+e+r+"/"+this.tagEndChar}function p(t){return this.options.indentBy.repeat(t)}function g(t){return!!t.startsWith(this.options.attributeNamePrefix)&&t.substr(this.attrPrefixLen)}function m(t){return t===this.options.cdataTagName}i.prototype.parse=function(t){return Array.isArray(t)&&this.options.rootNodeName&&1<this.options.rootNodeName.length&&(t={[this.options.rootNodeName]:t}),this.j2x(t,0).val},i.prototype.j2x=function(e,r){let n="",a="";for(var s in e)if(void 0!==e[s])if(null===e[s])a+=this.indentate(r)+"<"+s+"/"+this.tagEndChar;else if(e[s]instanceof Date)a+=this.buildTextNode(e[s],s,"",r);else if("object"!=typeof e[s]){var t=this.isAttribute(s);t?n+=" "+t+'="'+this.options.attrValueProcessor(""+e[s])+'"':this.isCDATA(s)?e[this.options.textNodeName]?a+=this.replaceCDATAstr(e[this.options.textNodeName],e[s]):a+=this.replaceCDATAstr("",e[s]):s===this.options.textNodeName?e[this.options.cdataTagName]||(a+=this.options.tagValueProcessor(""+e[s])):a+=this.buildTextNode(e[s],s,"",r)}else if(Array.isArray(e[s]))if(this.isCDATA(s))a+=this.indentate(r),e[this.options.textNodeName]?a+=this.replaceCDATAarr(e[this.options.textNodeName],e[s]):a+=this.replaceCDATAarr("",e[s]);else{var i=e[s].length;for(let t=0;t<i;t++){var o=e[s][t];void 0!==o&&(a+=null===o?this.indentate(r)+"<"+s+"/"+this.tagEndChar:"object"==typeof o?this.processTextOrObjNode(o,s,r):this.buildTextNode(o,s,"",r))}}else if(this.options.attrNodeName&&s===this.options.attrNodeName){var l=Object.keys(e[s]),u=l.length;for(let t=0;t<u;t++)n+=" "+l[t]+'="'+this.options.attrValueProcessor(""+e[s][l[t]])+'"'}else a+=this.processTextOrObjNode(e[s],s,r);return{attrStr:n,val:a}},e.exports=i},{"./util":8}],4:[function(t,e,r){"use strict";function n(t){return String.fromCharCode(t)}function a(t){return-1!==s.indexOf(t)}const h={nilChar:n(176),missingChar:n(201),nilPremitive:n(175),missingPremitive:n(200),emptyChar:n(178),emptyValue:n(177),boundryChar:n(179),objStart:n(198),arrStart:n(204),arrayEnd:n(185)},s=[h.nilChar,h.nilPremitive,h.missingChar,h.missingPremitive,h.boundryChar,h.emptyChar,h.emptyValue,h.arrayEnd,h.objStart,h.arrStart],f=function(r,n,a){if("string"==typeof n)return r&&r[0]&&void 0!==r[0].val?p(r[0].val,n):p(r,n);var t=void 0===(t=r)?h.missingChar:null===t?h.nilChar:!(t.child&&0===Object.keys(t.child).length&&(!t.attrsMap||0===Object.keys(t.attrsMap).length))||h.emptyChar;if(!0!==t)return t;{let e="";if(Array.isArray(n)){e+=h.arrStart;var s=n[0],i=r.length;if("string"==typeof s)for(let t=0;t<i;t++){var o=p(r[t].val,s);e=g(e,o)}else for(let t=0;t<i;t++){var l=f(r[t],s,a);e=g(e,l)}e+=h.arrayEnd}else{e+=h.objStart;var u,c=Object.keys(n);for(u in Array.isArray(r)&&(r=r[0]),c){var d=c[u];let t;t=!a.ignoreAttributes&&r.attrsMap&&r.attrsMap[d]?f(r.attrsMap[d],n[d],a):d===a.textNodeName?f(r.val,n[d],a):f(r.child[d],n[d],a),e=g(e,t)}}return e}},p=function(t){switch(t){case void 0:return h.missingPremitive;case null:return h.nilPremitive;case"":return h.emptyValue;default:return t}},g=function(t,e){return a(e[0])||a(t[t.length-1])||(t+=h.boundryChar),t+e};const i=t("./xmlstr2xmlnode"),o=t("./util").buildOptions;r.convert2nimn=function(t,e,r){return r=o(r,i.defaultOptions,i.props),f(t,e,r)}},{"./util":8,"./xmlstr2xmlnode":11}],5:[function(t,e,r){"use strict";function c(e,r,n){var t,a={};if(!r.alwaysCreateTextNode&&(!e.child||d.isEmptyObject(e.child))&&(!e.attrsMap||d.isEmptyObject(e.attrsMap)))return d.isExist(e.val)?e.val:"";d.isExist(e.val)&&("string"!=typeof e.val||""!==e.val&&e.val!==r.cdataPositionChar)&&(t=d.isTagNameInArrayMode(e.tagname,r.arrayMode,n),a[r.textNodeName]=t?[e.val]:e.val),d.merge(a,e.attrsMap,r.arrayMode);var s=Object.keys(e.child);for(let t=0;t<s.length;t++){var i=s[t];if(e.child[i]&&1<e.child[i].length)for(var o in a[i]=[],e.child[i])e.child[i].hasOwnProperty(o)&&a[i].push(c(e.child[i][o],r,i));else{var l=c(e.child[i][0],r,i),u=!0===r.arrayMode&&"object"==typeof l||d.isTagNameInArrayMode(i,r.arrayMode,n);a[i]=u?[l]:l}}return a}const d=t("./util");r.convertToJson=c},{"./util":8}],6:[function(t,e,r){"use strict";const l=t("./util"),n=t("./util").buildOptions,a=t("./xmlstr2xmlnode");const u=function(e,r,t){let n="{";var a,s=Object.keys(e.child);for(let t=0;t<s.length;t++){var i=s[t];if(e.child[i]&&1<e.child[i].length){for(var o in n+='"'+i+'" : [ ',e.child[i])n+=u(e.child[i][o],r)+" , ";n=n.substr(0,n.length-1)+" ] "}else n+='"'+i+'" : '+u(e.child[i][0],r)+" ,"}return l.merge(n,e.attrsMap),l.isEmptyObject(n)?l.isExist(e.val)?e.val:"":(l.isExist(e.val)&&("string"!=typeof e.val||""!==e.val&&e.val!==r.cdataPositionChar)&&(n+='"'+r.textNodeName+'" : '+(!0!==(a=e.val)&&!1!==a&&isNaN(a)?'"'+a+'"':a)),(n=","===n[n.length-1]?n.substr(0,n.length-2):n)+"}")};r.convertToJsonString=function(t,e){return(e=n(e,a.defaultOptions,a.props)).indentBy=e.indentBy||"",u(t,e,0)}},{"./util":8,"./xmlstr2xmlnode":11}],7:[function(t,e,n){"use strict";const a=t("./node2json"),s=t("./xmlstr2xmlnode"),i=t("./xmlstr2xmlnode"),o=t("./util").buildOptions,l=t("./validator");n.parse=function(t,e={},r){if(r){!0===r&&(r={});r=l.validate(t,r);if(!0!==r)throw Error(r.err.msg)}e.parseTrueNumberOnly&&!1!==e.parseNodeValue&&!e.numParseOptions&&(e.numParseOptions={leadingZeros:!1});r=o(e,i.defaultOptions,i.props),e=s.getTraversalObj(t,r);return a.convertToJson(e,r)},n.convertTonimn=t("./nimndata").convert2nimn,n.getTraversalObj=s.getTraversalObj,n.convertToJson=a.convertToJson,n.convertToJsonString=t("./node2json_str").convertToJsonString,n.validate=l.validate,n.j2xParser=t("./json2xml"),n.parseToNimn=function(t,e,r){return n.convertTonimn(n.getTraversalObj(t,r),e,r)}},{"./json2xml":3,"./nimndata":4,"./node2json":5,"./node2json_str":6,"./util":8,"./validator":9,"./xmlstr2xmlnode":11}],8:[function(t,e,r){"use strict";var n=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",n="["+n+"][:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*";const a=new RegExp("^"+n+"$");r.isExist=function(t){return void 0!==t},r.isEmptyObject=function(t){return 0===Object.keys(t).length},r.merge=function(e,r,n){if(r){var a=Object.keys(r),s=a.length;for(let t=0;t<s;t++)e[a[t]]="strict"===n?[r[a[t]]]:r[a[t]]}},r.getValue=function(t){return r.isExist(t)?t:""},r.buildOptions=function(e,r,n){var a={};if(!e)return r;for(let t=0;t<n.length;t++)void 0!==e[n[t]]?a[n[t]]=e[n[t]]:a[n[t]]=r[n[t]];return a},r.isTagNameInArrayMode=function(t,e,r){return!1!==e&&(e instanceof RegExp?e.test(t):"function"==typeof e?!!e(t,r):"strict"===e)},r.isName=function(t){t=a.exec(t);return!(null==t)},r.getAllMatches=function(t,e){var r=[];let n=e.exec(t);for(;n;){var a=[],s=(a.startIndex=e.lastIndex-n[0].length,n.length);for(let t=0;t<s;t++)a.push(n[t]);r.push(a),n=e.exec(t)}return r},r.nameRegexp=n},{}],9:[function(t,e,r){"use strict";const p=t("./util"),n={allowBooleanAttributes:!1},g=["allowBooleanAttributes"];function m(t,e){for(var r=e;e<t.length;e++)if("?"==t[e]||" "==t[e]){var n=t.substr(r,e-r);if(5<e&&"xml"===n)return x("InvalidXml","XML declaration allowed only at the start of the document.",w(t,e));if("?"==t[e]&&">"==t[e+1]){e++;break}}return e}function b(e,r){if(e.length>r+5&&"-"===e[r+1]&&"-"===e[r+2]){for(r+=3;r<e.length;r++)if("-"===e[r]&&"-"===e[r+1]&&">"===e[r+2]){r+=2;break}}else if(e.length>r+8&&"D"===e[r+1]&&"O"===e[r+2]&&"C"===e[r+3]&&"T"===e[r+4]&&"Y"===e[r+5]&&"P"===e[r+6]&&"E"===e[r+7]){let t=1;for(r+=8;r<e.length;r++)if("<"===e[r])t++;else if(">"===e[r]&&0===--t)break}else if(e.length>r+9&&"["===e[r+1]&&"C"===e[r+2]&&"D"===e[r+3]&&"A"===e[r+4]&&"T"===e[r+5]&&"A"===e[r+6]&&"["===e[r+7])for(r+=8;r<e.length;r++)if("]"===e[r]&&"]"===e[r+1]&&">"===e[r+2]){r+=2;break}return r}r.validate=function(a,s){s=p.buildOptions(s,n,g);var i=[];let o=!1,l=!1;"\ufeff"===a[0]&&(a=a.substr(1));for(let n=0;n<a.length;n++)if("<"===a[n]&&"?"===a[n+1]){if((n=m(a,n+=2)).err)return n}else if("<"===a[n]){var u=n;if("!"===a[++n])n=b(a,n);else{let t=!1,e=("/"===a[n]&&(t=!0,n++),"");for(;n<a.length&&">"!==a[n]&&" "!==a[n]&&"\t"!==a[n]&&"\n"!==a[n]&&"\r"!==a[n];n++)e+=a[n];if("/"===(e=e.trim())[e.length-1]&&(e=e.substring(0,e.length-1),n--),c=e,!p.isName(c)){let t;return x("InvalidTag",t=0===e.trim().length?"Invalid space after '<'.":"Tag '"+e+"' is an invalid name.",w(a,n))}var c=function(t,e){let r="",n="",a=!1;for(;e<t.length;e++){if(t[e]===y||t[e]===v)""===n?n=t[e]:n===t[e]&&(n="");else if(">"===t[e]&&""===n){a=!0;break}r+=t[e]}return""===n&&{value:r,index:e,tagClosed:a}}(a,n);if(!1===c)return x("InvalidAttr","Attributes for '"+e+"' have open quote.",w(a,n));let r=c.value;if(n=c.index,"/"===r[r.length-1]){var d=n-r.length,h=N(r=r.substring(0,r.length-1),s);if(!0!==h)return x(h.err.code,h.err.msg,w(a,d+h.err.line));o=!0}else if(t){if(!c.tagClosed)return x("InvalidTag","Closing tag '"+e+"' doesn't have proper closing.",w(a,n));if(0<r.trim().length)return x("InvalidTag","Closing tag '"+e+"' can't have attributes or invalid starting.",w(a,u));d=i.pop();if(e!==d.tagName)return h=w(a,d.tagStartPos),x("InvalidTag","Expected closing tag '"+d.tagName+"' (opened in line "+h.line+", col "+h.col+") instead of closing tag '"+e+"'.",w(a,u));0==i.length&&(l=!0)}else{c=N(r,s);if(!0!==c)return x(c.err.code,c.err.msg,w(a,n-r.length+c.err.line));if(!0===l)return x("InvalidXml","Multiple possible root nodes found.",w(a,n));i.push({tagName:e,tagStartPos:u}),o=!0}for(n++;n<a.length;n++)if("<"===a[n])if("!"===a[n+1])n=b(a,++n);else{if("?"!==a[n+1])break;if((n=m(a,++n)).err)return n}else if("&"===a[n]){var f=function(t,e){if(";"===t[++e])return-1;if("#"===t[e])return function(t,e){let r=/\d/;"x"===t[e]&&(e++,r=/[\da-fA-F]/);for(;e<t.length;e++){if(";"===t[e])return e;if(!t[e].match(r))break}return-1}(t,++e);let r=0;for(;e<t.length;e++,r++)if(!(t[e].match(/\w/)&&r<20)){if(";"===t[e])break;return-1}return e}(a,n);if(-1==f)return x("InvalidChar","char '&' is not expected.",w(a,n));n=f}"<"===a[n]&&n--}}else if(" "!==a[n]&&"\t"!==a[n]&&"\n"!==a[n]&&"\r"!==a[n])return x("InvalidChar","char '"+a[n]+"' is not expected.",w(a,n));return o?1==i.length?x("InvalidTag","Unclosed tag '"+i[0].tagName+"'.",w(a,i[0].tagStartPos)):!(0<i.length)||x("InvalidXml","Invalid '"+JSON.stringify(i.map(t=>t.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):x("InvalidXml","Start tag expected.",1)};const y='"',v="'";const i=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function N(t,e){var r,n=p.getAllMatches(t,i),a={};for(let t=0;t<n.length;t++){if(0===n[t][1].length)return x("InvalidAttr","Attribute '"+n[t][2]+"' has no space in starting.",o(n[t]));if(void 0===n[t][3]&&!e.allowBooleanAttributes)return x("InvalidAttr","boolean attribute '"+n[t][2]+"' is not allowed.",o(n[t]));var s=n[t][2];if(r=s,!p.isName(r))return x("InvalidAttr","Attribute '"+s+"' is an invalid name.",o(n[t]));if(a.hasOwnProperty(s))return x("InvalidAttr","Attribute '"+s+"' is repeated.",o(n[t]));a[s]=1}return!0}function x(t,e,r){return{err:{code:t,msg:e,line:r.line||r,col:r.col}}}function w(t,e){t=t.substring(0,e).split(/\r?\n/);return{line:t.length,col:t[t.length-1].length+1}}function o(t){return t.startIndex+t[1].length}},{"./util":8}],10:[function(t,e,r){"use strict";e.exports=function(t,e,r){this.tagname=t,this.parent=e,this.child={},this.attrsMap={},this.val=r,this.addChild=function(t){Array.isArray(this.child[t.tagname])?this.child[t.tagname].push(t):this.child[t.tagname]=[t]}}},{}],11:[function(t,e,r){"use strict";const f=t("./util"),n=t("./util").buildOptions,p=t("./xmlNode"),a=t("strnum");"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,f.nameRegexp);!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const g={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!1,arrayMode:!1,trimValues:!0,cdataTagName:!1,cdataPositionChar:"\\c",numParseOptions:{hex:!0,leadingZeros:!0},tagValueProcessor:function(t,e){return t},attrValueProcessor:function(t,e){return t},stopNodes:[],alwaysCreateTextNode:!1},m=(r.defaultOptions=g,["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","ignoreNameSpace","allowBooleanAttributes","parseNodeValue","parseAttributeValue","arrayMode","trimValues","cdataTagName","cdataPositionChar","tagValueProcessor","attrValueProcessor","parseTrueNumberOnly","numParseOptions","stopNodes","alwaysCreateTextNode"]);function b(t,e,r){return e&&(r.trimValues&&(e=e.trim()),e=i(e=r.tagValueProcessor(e,t),r.parseNodeValue,r.numParseOptions)),e}function i(t,e,r){return e&&"string"==typeof t?"true"===(e=t.trim())||"false"!==e&&a(t,r):f.isExist(t)?t:""}r.props=m;const o=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])(.*?)\\3)?","g");function y(t,e){if(!e.ignoreAttributes&&"string"==typeof t){t=t.replace(/\r?\n/g," ");var r=f.getAllMatches(t,o),n=r.length,a={};for(let t=0;t<n;t++){var s=function(t,e){if(e.ignoreNameSpace){var e=t.split(":"),r="/"===t.charAt(0)?"/":"";if("xmlns"===e[0])return"";2===e.length&&(t=r+e[1])}return t}(r[t][1],e);s.length&&(void 0!==r[t][4]?(e.trimValues&&(r[t][4]=r[t][4].trim()),r[t][4]=e.attrValueProcessor(r[t][4],s),a[e.attributeNamePrefix+s]=i(r[t][4],e.parseAttributeValue,e.numParseOptions)):e.allowBooleanAttributes&&(a[e.attributeNamePrefix+s]=!0))}if(Object.keys(a).length)return e.attrNodeName?((t={})[e.attrNodeName]=a,t):a}}function v(t,e,r,n){t=t.indexOf(e,r);if(-1===t)throw new Error(n);return t+e.length-1}r.getTraversalObj=function(a,s){a=a.replace(/\r\n?/g,"\n"),s=n(s,g,m);var t=new p("!xml");let i=t,o="";for(let n=0;n<a.length;n++)if("<"===a[n])if("/"===a[n+1]){var e=v(a,">",n,"Closing Tag is not closed.");let t=a.substring(n+2,e).trim();s.ignoreNameSpace&&-1!==(r=t.indexOf(":"))&&(t=t.substr(r+1)),i&&(i.val?i.val=f.getValue(i.val)+""+b(t,o,s):i.val=b(t,o,s)),s.stopNodes.length&&s.stopNodes.includes(i.tagname)&&(i.child=[],null==i.attrsMap&&(i.attrsMap={}),i.val=a.substr(i.startIndex+1,n-i.startIndex-1)),i=i.parent,o="",n=e}else if("?"===a[n+1])n=v(a,"?>",n,"Pi Tag is not closed.");else if("!--"===a.substr(n+1,3))n=v(a,"--\x3e",n,"Comment is not closed.");else if("!D"===a.substr(n+1,2)){var r=v(a,">",n,"DOCTYPE is not closed."),e=a.substring(n,r);n=0<=e.indexOf("[")?a.indexOf("]>",n)+1:r}else if("!["===a.substr(n+1,2)){var l=v(a,"]]>",n,"CDATA is not closed.")-2,u=a.substring(n+9,l);o&&(i.val=f.getValue(i.val)+""+b(i.tagname,o,s),o=""),s.cdataTagName?(c=new p(s.cdataTagName,i,u),i.addChild(c),i.val=f.getValue(i.val)+s.cdataPositionChar,u&&(c.val=u)):i.val=(i.val||"")+(u||""),n=2+l}else{var c=function(r,t){let n,a="";for(let e=t;e<r.length;e++){let t=r[e];if(n)t===n&&(n="");else if('"'===t||"'"===t)n=t;else{if(">"===t)return{data:a,index:e};"\t"===t&&(t=" ")}a+=t}}(a,n+1);let t=c.data;var d,h,u=c.index,l=t.indexOf(" ");let e=t,r=!0;-1!==l&&(e=t.substr(0,l).replace(/\s\s*$/,""),t=t.substr(l+1)),s.ignoreNameSpace&&-1!==(d=e.indexOf(":"))&&(e=e.substr(d+1),r=e!==c.data.substr(d+1)),i&&o&&"!xml"!==i.tagname&&(i.val=f.getValue(i.val)+""+b(i.tagname,o,s)),0<t.length&&t.lastIndexOf("/")===t.length-1?(t="/"===e[e.length-1]?e=e.substr(0,e.length-1):t.substr(0,t.length-1),d=new p(e,i,""),e!==t&&(d.attrsMap=y(t,s)),i.addChild(d)):(h=new p(e,i),s.stopNodes.length&&s.stopNodes.includes(h.tagname)&&(h.startIndex=u),e!==t&&r&&(h.attrsMap=y(t,s)),i.addChild(h),i=h),o="",n=u}else o+=a[n];return t}},{"./util":8,"./xmlNode":10,strnum:13}],12:[function(t,r,n){!function(e){!function(){"use strict";var t=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e)return e;throw new Error("unable to locate global object")}();r.exports=n=t.fetch,t.fetch&&(n.default=t.fetch.bind(t)),n.Headers=t.Headers,n.Request=t.Request,n.Response=t.Response}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],13:[function(t,e,r){const u=/^[-+]?0x[a-fA-F0-9]+$/,c=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/,d=(!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat),{hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0});e.exports=function(t,e={}){var r,n,a,s,i,o,l;return e=Object.assign({},d,e),!t||"string"!=typeof t||(r=t.trim(),void 0!==e.skipLike&&e.skipLike.test(r))?t:e.hex&&u.test(r)?Number.parseInt(r,16):!(s=c.exec(r))||(n=s[1],a=s[2],(l=s[3])&&-1!==l.indexOf(".")&&("."===(l=l.replace(/0+$/,""))?l="0":"."===l[0]?l="0"+l:"."===l[l.length-1]&&(l=l.substr(0,l.length-1))),l=l,s=s[4]||s[6],!e.leadingZeros&&0<a.length&&n&&"."!==r[2])||!e.leadingZeros&&0<a.length&&!n&&"."!==r[1]?t:-1!==(o=""+(i=Number(r))).search(/[eE]/)||s?e.eNotation?i:t:-1!==r.indexOf(".")?"0"===o&&""===l||o===l||n&&o==="-"+l?i:t:a?l===o||n+l===o?i:t:r===o||r===n+o?i:t}},{}],14:[function(t,e,r){const o=t("fast-xml-parser")["parse"];t=t("bent");const l={attributeNamePrefix:"",textNodeName:"#text",ignoreAttributes:!1,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!0,trimValues:!1,cdataTagName:"__cdata",cdataPositionChar:"\\c",parseTrueNumberOnly:!1,arrayMode:!1,stopNodes:["parse-me-as-string"]},u=t("string");e.exports={rule34:async function(t){if(!t||0===Object.keys(t).length)throw"nope";t.tags=t.tags||["all"],t.parse_tags=t.parse_tags||!0,t.remove_empty=t.remove_empty||!0,t.limit=t.limit||100;let e,r;100<(r=t.random?(e=Math.floor(11*Math.random()),1):(e=t.numPage||0,t.limit))&&(console.warn("100 is limit, using everything larger makes no sense"),r=100);var n=`https://api.rule34.xxx/index.php?page=dapi&s=post&q=index&tags=${t.tags.join("+")}&pid=${e}&limit=`+r,n=await u(n),a=o(n,l,!0);if(a.posts&&a.posts.post&&t.parse_tags)if(t.remove_empty)for(let t=0;t<a.posts.post.length;t++){var s=a.posts.post[t];s.tags_parsed=s.tags.split(" ").filter(t=>""!=t)}else for(let t=0;t<a.posts.post.length;t++){var i=a.posts.post[t];i.tags_parsed=i.tags.split(" ")}return{posts:a.posts?a.posts.post:[]}}}},{bent:1,"fast-xml-parser":7}],15:[function(t,e,r){const n=t("node-fetch");e.exports.makeRequest=function(l){return l=l[Math.floor(Math.random()*l.length)],new Promise(function(s,i){if(!l)return i({reason:"No subreddit supplied",message:"Couldn't do request because there wasn't a subreddit"});let o=Date.now();var t=["best","new","top","hot"],t=t[Math.floor(Math.random()*t.length)],t=`https://api.reddit.com/r/${l}/${t}.json?limit=10`;n(t).then(async t=>{try{var e=await t.json();if(200!==t.status)return i(e);!function t(e,r){if(10<=r)return i({reason:"retry limit exceeded",message:"Failed to find a suitable post",subbredit:l});r++;var n,a=e[Math.floor(Math.random()*e.length)].data;/(.jpg|.png|.gif|.jpeg)$/gi.test(a.url)?(n={url:a.url,source:a.permalink,nsfw:!0,tries:r,time:((Date.now()-o)/1e3).toFixed(2)},s(n)):!0===a.is_video||null===a.media||a.media.oembed.thumbnail_url.includes("gfycat")?t(e,r):(n={url:a.media.oembed.thumbnail_url,source:a.permalink,nsfw:!0,tries:r,time:((Date.now()-o)/1e3).toFixed(2)},s(n))}(e.data.children,0)}catch(t){i(t)}}).catch(t=>{i(t)})})}},{"node-fetch":12}],16:[function(t,e,r){var n=t("./handlers/r34Handler")["rule34"],a=t("./handlers/redditHandler")["makeRequest"],s=t("./tags/furry"),i=t("./tags/hentai"),t=t("./tags/real");e.exports={r34:n,reddit:{furry:s,hentai:i,real:t},redditCustom:a}},{"./handlers/r34Handler":14,"./handlers/redditHandler":15,"./tags/furry":17,"./tags/hentai":18,"./tags/real":19}],17:[function(t,e,r){const n=t("../handlers/redditHandler")["makeRequest"];e.exports={yaoi:function(){return n(["gfur"]).then(t=>t).catch(t=>{console.error(t)})},hentai:function(){return n(["furryfemdom","FurryPornSubreddit","furryporn","cat_girls"]).then(t=>t).catch(t=>{console.error(t)})},real:function(){return n(["fursuitsex"]).then(t=>t).catch(t=>{console.error(t)})}}},{"../handlers/redditHandler":15}],18:[function(t,e,r){const n=t("../handlers/redditHandler")["makeRequest"];e.exports={femboy:function(){return n(["FemboyHentai","FemboysAndHentai","FemboyFutaCoalition","traphentai"]).then(t=>t).catch(t=>{console.error(t)})},hentai:function(){return n(["MasturbationHentai","HentaiPetgirls","HentaiCumsluts","MonsterGirl","netorare","PublicHentai","CumHentai","saohentai","HentaiHumiliation","thick_hentai","rule34","HentaiBreeding","Hentai__videos","JerkOffToAnime","FreeuseHentai","HelplessHentai","rape_hentai","HentaiBeast","hentai"]).then(t=>t).catch(t=>{console.error(t)})},yaoi:function(){return n(["yaoi","YaoiNSFW","yaoigif"]).then(t=>t).catch(t=>{console.error(t)})},futanari:function(){return n(["futanari","futanari_Comics","FutanariHentai","FutaCum","FutaTrap","MonsterFuta"]).then(t=>t).catch(t=>{console.error(t)})}}},{"../handlers/redditHandler":15}],19:[function(t,e,r){const n=t("../handlers/redditHandler")["makeRequest"];e.exports={cumShot:function(){return n(["cumsluts","cumshots","CumshotSelfies"]).then(t=>t).catch(t=>{console.error(t)})},girlThighs:function(){return n(["girlsinyogapants","Thighs","thighhighs","ThickThighs","UnderwearGW","datgap","leggingsgonewild","pawg","hipcleavage","legs","pantyhose"]).then(t=>t).catch(t=>{console.error(t)})},bdsm:function(){return n(["bdsm","SheLikesItRough","Spanking","BDSMerotica"]).then(t=>t).catch(t=>{console.error(t)})},lesbian:function(){return n(["lesbians","StraightGirlsPlaying","mmgirls","dyke"]).then(t=>t).catch(t=>{console.error(t)})},bisexy:function(){return n(["Bisexy","heteroflexible"]).then(t=>t).catch(t=>{console.error(t)})},sissy:function(){return n(["Sissyperfection","sissycaptions","sissyhypno"]).then(t=>t).catch(t=>{console.error(t)})},girlAss:function(){return n(["ass","paag","asstastic","buttplug","whooties","AssholeBehindThong","Frogbutt","rearpussy","CuteLittleButts","HungryButts","reversecowgirl","facedownassup","butt","butts","pawg","bigasses","cosplaybutts","girlsinyogapants","BubbleButts","assinthong","smalltitsbigass","CelebrityButts","booty"]).then(t=>t).catch(t=>{console.error(t)})},panties:function(){return n(["panties","FullBackPanties","AssholeBehindThong","assinthong","PantiesToTheSide","thongs","UnderwearGW"]).then(t=>t).catch(t=>{console.error(t)})},pov:function(){return n(["POVTranny"]).then(t=>t).catch(t=>{console.error(t)})},shemale:function(){return n(["Tgirls","Shemales","Tgifs","shemale_gifs","ShemalesParadise","tflop","POVTranny"]).then(t=>t).catch(t=>{console.error(t)})},gayPorn:function(){return n(["ManSex","GayGifs","BarebackGayPorn","GayCocksuckers","GayFreeUse","GayGroupSex"]).then(t=>t).catch(t=>{console.error(t)})},gayAss:function(){return n(["manass"]).then(t=>t).catch(t=>{console.error(t)})},gayCumshot:function(){return n(["gaycumsluts"]).then(t=>t).catch(t=>{console.error(t)})},gayTwinks:function(){return n(["twinks","TwinkLove","CuteGuyButts"]).then(t=>t).catch(t=>{console.error(t)})},dickPic:function(){return n(["GaybrosGoneWild"]).then(t=>t).catch(t=>{console.error(t)})},manToys:function(){return n(["MenWithToys"]).then(t=>t).catch(t=>{console.error(t)})},femboy:function(){return n(["FemboyHookup","FemBoys","traps","SissyBoy4Femboy","sissyboysissygasm","FemboyGalleries","FemboySissyParadise","Sissies","sissypersonals","Femboy_Creampie","teenfemboy","boypussy","FemboyFucksGirl","Femboys4real","femboysbussy","femboysissyroommate","SissysPOV","FemboyNSFWhere"]).then(t=>t).catch(t=>{console.error(t)})}}},{"../handlers/redditHandler":15}],20:[function(t,e,r){t=t("../src/index");window.nswfparse=t},{"../src/index":16}]},{},[20]);